destiny_column = $("#<%= object_id(@card_mover.destiny_column)%>");
removeEmptyCardFromEmptyColumn(destiny_column);
<% cards = @card_mover.destiny_column.cards_from(@card_mover.origin_card) %>
<% game = @game.score %>
<% cards.each do |car| %>
  console.log("<%=car.id%>");
  destiny_column.append($("#<%= object_id(car) %>"));
<% end %>

<% if @card_mover.origin_column.is_a?(FeederLineColumn) %>
  <% if last_card = @card_mover.origin_column.cards.last %>
      card = $("#<%=object_id(last_card)%>");
      column = $("#<%= object_id(@card_mover.origin_column)%>");
      if(!card.length){
        $("#<%= object_id(@card_mover.origin_column)%> .card").last().remove();
        column.append("<%= escape_javascript(render partial: 'card', locals: { card: last_card }) %>")
      }
  <% else %>
      column = $("#<%= object_id(@card_mover.origin_column)%>");
      if(!column.hasClass("empty-column")) {
        column.addClass("empty-column");
        column.append("<%= escape_javascript image_tag("deck/empty.png") %>");
      }
  <% end %>
<% end %>
$('.move-card-form :input').not(':checkbox, :submit').removeAttr('value');
setDragAndDropAfterState();

updateScore($('#game-id').attr('value'));

<% if @game.card_counter == 52 %>
  $("#dialog-confirm").empty();
  $("#dialog-confirm").append("<%= escape_javascript(render partial: "pop_up", locals: {score: @game.score, aces: @game.all_aces_up, counter: @game.card_counter} )%>");
  $("#dialog-confirm").load('pop_up.html').dialog({modal:true});
<% end %>
