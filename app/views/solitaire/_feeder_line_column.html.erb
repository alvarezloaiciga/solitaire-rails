<% if column.cards_feeder_line_columns.present? %>
  <%= div_for column, class: "feed-line-column" do %>
    <% active_position = column.first_active_card_position %>
    <% column.cards_feeder_line_columns.order(:position).each do |card_feed| %>
      <% if card_feed.position >= active_position %>
        <%= render partial: 'card', locals: { card: card_feed.card, last: card_feed.position == column.cards_feeder_line_columns.map(&:position).max } %>
      <% else %>
        <%= render partial: 'card', locals: { card: :hidden } %>
      <% end %>
    <% end %>
  <% end %>
<% else %>
  <%= div_for column, class: "feed-line-column empty-column" do %>
    <%= image_tag("deck/empty.png") %>
  <% end %>
<% end %>
